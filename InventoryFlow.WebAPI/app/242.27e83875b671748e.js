"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[242,720,225],{8225:(S,v,s)=>{s.d(v,{G:()=>t});var c=s(553),r=s(5849),h=s(1474);let t=(()=>{class d{constructor(l){this.http=l}CategoryrAdd(l){return this.http.post(`${c.N.apiUrl}/api/CategoryAPI/CreateorUpdateCategory`,l)}CategoryDelete(l){return this.http.delete(`${c.N.apiUrl}/api/CategoryAPI/DeleteCategory/`+l)}getAllCategories(){return this.http.get(`${c.N.apiUrl}/api/CategoryAPI/GetAllCategories`)}getCategoryById(l){return this.http.get(`${c.N.apiUrl}/api/CategoryAPI/GetCategoryById/${l}`)}static#t=this.\u0275fac=function(T){return new(T||d)(r.LFG(h.eN))};static#e=this.\u0275prov=r.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()},4242:(S,v,s)=>{s.r(v),s.d(v,{StockModule:()=>_t});var c=s(6814),r=s(228),h=s(5219),t=s(5849),d=s(7209),M=s(9697),l=s(9720),T=s(8225),Z=s(7213),y=s(354),A=s(3965),b=s(3714),u=s(6340),x=s(4104),_=s(4480),f=s(707),m=s(95),C=s(6916),k=s(1532);function U(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"div",16)(1,"button",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openNew())}),t.qZA(),t.TgZ(2,"button",18),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.deleteSelectedStocks())}),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("disabled",!e.selectedStocks||!e.selectedStocks.length)}}function P(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"div",19)(1,"h5",20),t._uU(2,"Manage Stocks"),t.qZA(),t.TgZ(3,"span",21),t._UZ(4,"i",22),t.TgZ(5,"input",23),t.NdJ("input",function(n){t.CHM(e);const a=t.oxw(),g=t.MAs(7);return t.KtG(a.onGlobalFilter(g,n))}),t.qZA()()()}}function N(o,p){1&o&&(t.TgZ(0,"tr")(1,"th",24),t._UZ(2,"p-tableHeaderCheckbox"),t.qZA(),t.TgZ(3,"th",25),t._uU(4,"Id "),t._UZ(5,"p-sortIcon",26),t.qZA(),t.TgZ(6,"th",27),t._uU(7,"Product Name "),t._UZ(8,"p-sortIcon",28),t.qZA(),t.TgZ(9,"th",29),t._uU(10,"Vendor Name"),t._UZ(11,"p-sortIcon",30),t.qZA(),t.TgZ(12,"th",31),t._uU(13,"Price Per Product "),t._UZ(14,"p-sortIcon",32),t.qZA(),t.TgZ(15,"th",33),t._uU(16,"Quantity "),t._UZ(17,"p-sortIcon",34),t.qZA(),t.TgZ(18,"th",35),t._uU(19,"Batch "),t._UZ(20,"p-sortIcon",36),t.qZA(),t.TgZ(21,"th",37),t._uU(22,"Manufacturing Date "),t._UZ(23,"p-sortIcon",38),t.qZA(),t.TgZ(24,"th",39),t._uU(25,"Expiry Date "),t._UZ(26,"p-sortIcon",40),t.qZA(),t._UZ(27,"th"),t.qZA())}function D(o,p){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"p-tableCheckbox",41),t.qZA(),t.TgZ(3,"td",42)(4,"span",43),t._uU(5,"Id"),t.qZA(),t._uU(6),t.qZA(),t.TgZ(7,"td",42)(8,"span",43),t._uU(9,"Product Name"),t.qZA(),t._uU(10),t.qZA(),t.TgZ(11,"td",42)(12,"span",43),t._uU(13,"Vendor Name"),t.qZA(),t._uU(14),t.qZA(),t.TgZ(15,"td",44)(16,"span",43),t._uU(17,"Price"),t.qZA(),t._uU(18),t.ALo(19,"currency"),t.qZA(),t.TgZ(20,"td",42)(21,"span",43),t._uU(22,"Quantity"),t.qZA(),t._uU(23),t.qZA(),t.TgZ(24,"td",42)(25,"span",43),t._uU(26,"Batch"),t.qZA(),t._uU(27),t.qZA(),t.TgZ(28,"td",42)(29,"span",43),t._uU(30,"ManufacturingDate"),t.qZA(),t._uU(31),t.qZA(),t.TgZ(32,"td",42)(33,"span",43),t._uU(34,"ExpiryDate"),t.qZA(),t._uU(35),t.qZA(),t.TgZ(36,"td"),t._UZ(37,"div",45),t.qZA()()),2&o){const e=p.$implicit;t.xp6(2),t.Q6J("value",e),t.xp6(4),t.hij(" ",e.stockId," "),t.xp6(4),t.hij(" ",e.productName," "),t.xp6(4),t.hij(" ",e.vendorName," "),t.xp6(4),t.hij(" ",t.xi3(19,9,e.rate,"PKR ")," "),t.xp6(5),t.hij(" ",e.quantity," "),t.xp6(4),t.hij(" ",e.batch," "),t.xp6(4),t.hij(" ",e.manufacturingDate," "),t.xp6(4),t.hij(" ",e.expiryDate," ")}}function w(o,p){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.productMap[e.stock.productId]," ")}}function E(o,p){if(1&o&&t.YNc(0,w,2,1,"span",66),2&o){const e=t.oxw(2);t.Q6J("ngIf",e.stock.productId)}}function R(o,p){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=p.$implicit;t.Tol("product-badge status-"+e.id),t.xp6(1),t.Oqu(e.productName)}}function L(o,p){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.vendorMap[e.stock.vendorId]," ")}}function J(o,p){if(1&o&&t.YNc(0,L,2,1,"span",66),2&o){const e=t.oxw(2);t.Q6J("ngIf",e.stock.vendorId)}}function Q(o,p){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=p.$implicit;t.Tol("product-badge status-"+e.id),t.xp6(1),t.Oqu(e.vendorName)}}function F(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"div",46)(1,"label",47),t._uU(2,"Product Names"),t.qZA(),t.TgZ(3,"p-dropdown",48),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.stock.productId=n)}),t.YNc(4,E,1,1,"ng-template",49)(5,R,2,3,"ng-template",50),t.qZA()(),t.TgZ(6,"div",46)(7,"label",51),t._uU(8,"Vendor Names"),t.qZA(),t.TgZ(9,"p-dropdown",52),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.stock.vendorId=n)}),t.YNc(10,J,1,1,"ng-template",49)(11,Q,2,3,"ng-template",50),t.qZA()(),t.TgZ(12,"div",53)(13,"div",54)(14,"label",55),t._uU(15,"Price"),t.qZA(),t.TgZ(16,"p-inputNumber",56),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.stock.rate=n)}),t.qZA()(),t.TgZ(17,"div",54)(18,"label",57),t._uU(19,"Quantity"),t.qZA(),t.TgZ(20,"p-inputNumber",58),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.stock.quantity=n)}),t.qZA()()(),t.TgZ(21,"div",46)(22,"label",59),t._uU(23,"Batch"),t.qZA(),t.TgZ(24,"input",60),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.stock.batch=n)}),t.qZA()(),t.TgZ(25,"div",46)(26,"label",61),t._uU(27,"Manufacturing Date"),t.qZA(),t.TgZ(28,"p-calendar",62),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.stock.manufacturingDate=n)}),t.qZA()(),t.TgZ(29,"div",63)(30,"label",64),t._uU(31,"Expiry Date"),t.qZA(),t.TgZ(32,"p-calendar",65),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.stock.expiryDate=n)}),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.stock.productId)("options",e.productsList),t.xp6(6),t.Q6J("ngModel",e.stock.vendorId)("options",e.vendorsList),t.xp6(7),t.Q6J("ngModel",e.stock.rate),t.xp6(4),t.Q6J("ngModel",e.stock.quantity),t.xp6(4),t.Q6J("ngModel",e.stock.batch),t.xp6(4),t.Q6J("ngModel",e.stock.manufacturingDate)("showIcon",!0),t.xp6(4),t.Q6J("ngModel",e.stock.expiryDate)("showIcon",!0)}}function B(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"button",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.hideDialog())}),t.qZA(),t.TgZ(1,"button",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.saveProduct())}),t.qZA()}}function O(o,p){if(1&o&&(t.TgZ(0,"span"),t._uU(1,"Are you sure you want to delete "),t.TgZ(2,"b"),t._uU(3),t.qZA(),t._uU(4,"?"),t.qZA()),2&o){const e=t.oxw();t.xp6(3),t.hij(" ",e.pName,"")}}function K(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"button",69),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.deleteStockDialog=!1)}),t.qZA(),t.TgZ(1,"button",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.confirmDelete())}),t.qZA()}}const G=()=>["productName","vendorName","rate","quantity","batch","manufacturingDate","expiryDate","inStock"],H=()=>[10,20,30],q=()=>({width:"450px"});let I=(()=>{class o{constructor(e,i,n,a,g){this.service=e,this.messageService=i,this.productService=n,this.vendorService=a,this.categoryService=g,this.productsList=[],this.vendorsList=[],this.categoryList=[],this.loading=!1,this.stockList=[],this.stock={},this.selectedStocks=[],this.deleteStocksDialog=!1,this.deleteStockDialog=!1,this.submitted=!1,this.stockDialog=!1,this.stockToDelete={},this.cols=[],this.categoryMap={},this.vendorMap={},this.productMap={}}ngOnInit(){this.refreshStockList(),this.cols=[{field:"product",header:"Product"},{field:"price",header:"Price"},{field:"category",header:"Category"},{field:"rating",header:"Reviews"},{field:"inventoryStatus",header:"Status"}],this.productService.getAllProducts().subscribe({next:e=>{this.loading=!1,this.productsList=e.data,this.productsList.forEach(i=>{this.productMap[i.id]=i.productName})},error:e=>{this.loading=!1,this.messageService.add({severity:"error",summary:"Error",detail:e.message,life:3e3})}}),this.vendorService.getAllVendors().subscribe({next:e=>{this.loading=!1,this.vendorsList=e.data,this.vendorsList.forEach(i=>{this.vendorMap[i.id]=i.vendorName})},error:e=>{this.loading=!1,this.messageService.add({severity:"error",summary:"Error",detail:e.message,life:3e3})}}),this.categoryService.getAllCategories().subscribe({next:e=>{this.loading=!1,this.categoryList=e.data,this.categoryList.forEach(i=>{this.categoryMap[i.id]=i.categoryName})},error:e=>{this.loading=!1,this.messageService.add({severity:"error",summary:"Error",detail:e.message,life:3e3})}})}openNew(){this.stock={},this.submitted=!1,this.stockDialog=!0}deleteSelectedStocks(){this.deleteStocksDialog=!0}editStock(e){let i=this.getKeyByValue(e.productName,this.productMap),n=this.getKeyByValue(e.vendorName,this.vendorMap),a=this.getKeyByValue(e.categoryName,this.categoryMap);e.expiryDate&&(e.expiryDate=new Date(e.expiryDate)),e.manufacturingDate&&(e.manufacturingDate=new Date(e?.manufacturingDate)),e.id=e.stockId,e.productId=i,e.vendorId=n,e.categoryId=a,console.log(e),this.stock={...e},this.stockDialog=!0}deleteStock(e){this.deleteStockDialog=!0,this.pName=e.productName,this.stockIdtoDelete=e.stockId}confirmDelete(){this.deleteStockDialog=!1,this.service.StockDelete(this.stockIdtoDelete).subscribe({next:e=>{this.messageService.add(1==e.status?{severity:"success",summary:"Successful",detail:e.message,life:3e3}:{severity:"error",summary:"Error",detail:e.message,life:3e3}),this.refreshStockList()},error:e=>{this.messageService.add({severity:"error",summary:"Error",detail:e.message,life:3e3})}})}hideDialog(){this.stockDialog=!1,this.submitted=!1}saveProduct(){console.log(this.stock),this.submitted=!0,this.service.StockAdd(this.stock).subscribe({next:e=>{this.loading=!1,this.messageService.add(1==e.status?{severity:"success",summary:"Successful",detail:e.message,life:3e3}:{severity:"error",summary:"Error",detail:e.message,life:3e3}),this.refreshStockList()},error:e=>{this.messageService.add({severity:"error",summary:"Error",detail:e.message,life:3e3})}}),this.stock={},this.stockDialog=!1}findIndexById(e){let i=-1;for(let n=0;n<this.stockList.length;n++)if(this.stockList[n].id===e){i=n;break}return i}onGlobalFilter(e,i){e.filterGlobal(i.target.value,"contains")}refreshStockList(){this.service.getAllStockWithNames().subscribe({next:e=>{this.stockList=e.data},error:e=>{this.messageService.add({severity:"error",summary:"Error",detail:e.message,life:3e3})}})}getKeyByValue(e,i){const n=Object.keys(i);for(const a of n)if(i[a]===e)return parseInt(a,10)}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(d.q),t.Y36(h.ez),t.Y36(M.M),t.Y36(l.m),t.Y36(T.G))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-stock-crud"]],features:[t._Bn([h.ez])],decls:19,vars:22,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","id",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","selection","rowHover","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Stock Details",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[1,"my-2"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pButton","","pRipple","","label","Delete","icon","pi pi-trash",1,"p-button-danger",3,"disabled","click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search by any column...",1,"w-full","sm:w-auto",3,"input"],[2,"width","3rem"],["pSortableColumn","stockId"],["field","stockId"],["pSortableColumn","productName"],["field","productName"],["pSortableColumn","vendorName"],["field","vendorName"],["pSortableColumn","rate"],["field","rate"],["pSortableColumn","quantity"],["field","quantity"],["pSortableColumn","batch"],["field","batch"],["pSortableColumn","manufacturingDate"],["field","manufacturingDate"],["pSortableColumn","expiryDate"],["field","expiryDate"],[3,"value"],[2,"width","14%","min-width","10rem"],[1,"p-column-title"],[2,"width","14%","min-width","8rem"],[1,"flex"],[1,"field"],["for","productId"],["inputId","productId","optionValue","id","optionLabel","productName","placeholder","Select",3,"ngModel","options","ngModelChange"],["pTemplate","selectedItem"],["pTemplate","item"],["for","vendorId"],["inputId","vendorId","optionValue","id","optionLabel","vendorName","placeholder","Select",3,"ngModel","options","ngModelChange"],[1,"formgrid","grid"],[1,"field","col"],["for","rate"],["id","price","mode","currency","currency","PKR","locale","en-US",3,"ngModel","ngModelChange"],["for","quantity"],["id","quantity",3,"ngModel","ngModelChange"],["for","batch"],["type","text","pInputText","","id","name",3,"ngModel","ngModelChange"],["for","manufacturingDate"],["id","manufacturingDate",3,"ngModel","showIcon","ngModelChange"],[1,"expiryDate"],["for","name"],["id","expiryDate",3,"ngModel","showIcon","ngModelChange"],[4,"ngIf"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"p-toast"),t.TgZ(4,"p-toolbar",3),t.YNc(5,U,3,1,"ng-template",4),t.qZA(),t.TgZ(6,"p-table",5,6),t.NdJ("selectionChange",function(g){return n.selectedStocks=g}),t.YNc(8,P,6,0,"ng-template",7)(9,N,28,0,"ng-template",8)(10,D,38,12,"ng-template",9),t.qZA()(),t.TgZ(11,"p-dialog",10),t.NdJ("visibleChange",function(g){return n.stockDialog=g}),t.YNc(12,F,33,11,"ng-template",11)(13,B,2,0,"ng-template",12),t.qZA(),t.TgZ(14,"p-dialog",13),t.NdJ("visibleChange",function(g){return n.deleteStockDialog=g}),t.TgZ(15,"div",14),t._UZ(16,"i",15),t.YNc(17,O,5,1,"span"),t.qZA(),t.YNc(18,K,2,0,"ng-template",12),t.qZA()()()),2&i&&(t.xp6(6),t.Q6J("value",n.stockList)("columns",n.cols)("rows",10)("globalFilterFields",t.DdM(18,G))("paginator",!0)("rowsPerPageOptions",t.DdM(19,H))("showCurrentPageReport",!0)("selection",n.selectedStocks)("rowHover",!0),t.xp6(5),t.Akn(t.DdM(20,q)),t.Q6J("visible",n.stockDialog)("modal",!0),t.xp6(3),t.Akn(t.DdM(21,q)),t.Q6J("visible",n.deleteStockDialog)("modal",!0),t.xp6(3),t.um2(17,n.stock?17:-1))},dependencies:[c.O5,Z.V,h.jx,y.Rn,A.Lt,b.o,u.o,x.FN,_.H,f.Hq,m.Fj,m.JJ,m.On,C.iA,C.lQ,C.fz,C.UA,C.Mo,k.f,c.H9]})}return o})();function j(o,p){1&o&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Product Name"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Requested Quantity"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Total Price"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Action"),t.qZA()())}function Y(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"td")(9,"button",18),t.NdJ("click",function(){const a=t.CHM(e).$implicit,g=t.oxw(3);return t.KtG(g.editItemFromRequestList(a))}),t.qZA()(),t.TgZ(10,"td")(11,"button",19),t.NdJ("click",function(){const a=t.CHM(e).$implicit,g=t.oxw(3);return t.KtG(g.removeItemFromRequestList(a))}),t.qZA()()()}if(2&o){const e=p.$implicit;t.xp6(2),t.Oqu(e.productName),t.xp6(2),t.Oqu(e.requestedQuantity),t.xp6(2),t.Oqu(t.xi3(7,3,e.requestedQuantity*e.pricePerUnit,"PKR "))}}const V=()=>({width:"100%"});function $(o,p){if(1&o&&(t.TgZ(0,"div",6)(1,"p-table",17),t.YNc(2,j,9,0,"ng-template",11)(3,Y,12,6,"ng-template",12),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(1),t.Akn(t.DdM(3,V)),t.Q6J("value",e.requestList)}}function z(o,p){if(1&o&&t.YNc(0,$,4,4,"div",16),2&o){const e=t.oxw();t.Q6J("ngIf",e.requestList&&e.requestList.length>0)}}function W(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"div",20)(1,"h5",21),t._uU(2,"Current Items In Stock"),t.qZA(),t.TgZ(3,"span",22),t._UZ(4,"i",23),t.TgZ(5,"input",24),t.NdJ("input",function(n){t.CHM(e);const a=t.oxw(),g=t.MAs(15);return t.KtG(a.onGlobalFilter(g,n))}),t.qZA()()()}}function X(o,p){1&o&&(t.TgZ(0,"tr")(1,"th",25),t._uU(2,"Product Name "),t._UZ(3,"p-sortIcon",26),t.qZA(),t.TgZ(4,"th",27),t._uU(5,"Product Id "),t._UZ(6,"p-sortIcon",28),t.qZA(),t.TgZ(7,"th",29),t._uU(8,"Price Per Product "),t._UZ(9,"p-sortIcon",30),t.qZA(),t.TgZ(10,"th",31),t._uU(11,"Total Quantity "),t._UZ(12,"p-sortIcon",32),t.qZA()())}const tt=o=>({"selected-product":o});function et(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"tr",33)(1,"td",34)(2,"span",35),t._uU(3,"Product Name"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"td",34)(6,"span",35),t._uU(7,"Product Id"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"td",36)(10,"span",35),t._uU(11,"Price Per Product"),t.qZA(),t._uU(12),t.ALo(13,"currency"),t.qZA(),t.TgZ(14,"td",34)(15,"span",35),t._uU(16,"Total Quantity"),t.qZA(),t._uU(17),t.qZA(),t.TgZ(18,"td")(19,"div",37)(20,"button",38),t.NdJ("click",function(){const a=t.CHM(e).$implicit,g=t.oxw();return t.KtG(g.addToCartList(a))}),t.qZA()()()()}if(2&o){const e=p.$implicit,i=t.oxw();t.Q6J("ngClass",t.VKq(8,tt,i.isProductInCart(e.productId))),t.xp6(4),t.hij(" ",e.productName," "),t.xp6(4),t.hij(" ",e.productId," "),t.xp6(4),t.hij(" ",t.xi3(13,5,e.pricePerUnit,"PKR ")," "),t.xp6(5),t.hij(" ",e.totalQty," ")}}function ot(o,p){if(1&o&&(t.TgZ(0,"div",51),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" Quantity cannot be greater than ",e.newProductRequest.MaxQuantity,". ")}}function nt(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"div",39)(1,"label",40),t._uU(2,"Product Name"),t.qZA(),t.TgZ(3,"input",41),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.newProductRequest.productName=n)}),t.qZA()(),t.TgZ(4,"div",39)(5,"label",42),t._uU(6,"Price Per Product"),t.qZA(),t.TgZ(7,"input",43),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.newProductRequest.pricePerUnit=n)}),t.qZA()(),t.TgZ(8,"div",44)(9,"div",45)(10,"label",46),t._uU(11,"Quantity"),t.qZA(),t.TgZ(12,"p-inputNumber",47),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.newProductRequest.requestedQuantity=n)})("ngModelChange",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.checkQuantity())}),t.qZA(),t.YNc(13,ot,2,1,"div",48),t.qZA()(),t.TgZ(14,"div",39)(15,"label",49),t._uU(16,"Total Price"),t.qZA(),t._UZ(17,"input",50),t.ALo(18,"currency"),t.qZA(),t.TgZ(19,"div",51),t._uU(20," Total price cannot be greater than 2 million "),t.qZA()}if(2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.newProductRequest.productName),t.xp6(4),t.Q6J("ngModel",e.newProductRequest.pricePerUnit),t.xp6(5),t.Q6J("ngModel",e.newProductRequest.requestedQuantity)("styleClass",e.quantityError?"input-error":""),t.xp6(1),t.Q6J("ngIf",e.quantityError),t.xp6(4),t.Q6J("value",t.xi3(18,6,e.newProductRequest.requestedQuantity*e.newProductRequest.pricePerUnit,"PKR "))}}function it(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"button",52),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.hideDialog())}),t.qZA(),t.TgZ(1,"button",53),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.saveProduct())}),t.qZA()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.quantityError||e.newProductRequest.requestedQuantity*e.newProductRequest.pricePerUnit>2e6)}}const rt=()=>["productName","totalQty","pricePerUnit"],st=()=>[10,20,30],at=()=>({width:"450px"});let lt=(()=>{class o{constructor(e,i){this.service=e,this.messageService=i,this.loading=!1,this.stockForUserList=[],this.productsForRequestList=[],this.requestList=[],this.newProductRequest={},this.quantityError=!1,this.selectedStocks=[],this.stockDialog=!1,this.cols=[],this.editMode=!1}ngOnInit(){this.refreshStockList(),this.cols=[{field:"product",header:"Product"},{field:"price",header:"Price"},{field:"category",header:"Category"},{field:"rating",header:"Reviews"},{field:"inventoryStatus",header:"Status"}]}getTotalPrice(){return this.requestList.reduce((e,i)=>e+i.requestedQuantity*i.pricePerUnit,0)}saveData(){this.service.AddRequestList(this.requestList).subscribe({next:e=>{this.loading=!1,this.messageService.add(1==e.status?{severity:"success",summary:"Successful",detail:"Your Request has been successfully sent",life:8e3}:{severity:"error",summary:"Error",detail:e.message,life:3e3}),this.refreshStockList()},error:e=>{this.messageService.add({severity:"error",summary:"Error",detail:e.message,life:3e3})}}),this.requestList=[]}addToCartList(e){this.newProductRequest={productId:e.productId,productName:e.productName,pricePerUnit:e.pricePerUnit,MaxQuantity:e.totalQty,requestedQuantity:0},this.stockDialog=!0,this.editMode=!1}editItemFromRequestList(e){this.newProductRequest={...e},this.stockDialog=!0,this.editMode=!0}saveProduct(){if(this.editMode){const e=this.requestList.findIndex(i=>i.productId===this.newProductRequest.productId);-1!==e&&(this.requestList[e]={...this.newProductRequest})}else this.requestList.push({...this.newProductRequest});this.newProductRequest={},this.stockDialog=!1,this.editMode=!1}hideDialog(){this.stockDialog=!1}removeItemFromRequestList(e){const i=this.requestList.findIndex(n=>n===e);-1!==i&&this.requestList.splice(i,1)}checkQuantity(){this.quantityError=this.newProductRequest.requestedQuantity>this.newProductRequest.MaxQuantity}isProductInCart(e){return this.requestList.some(i=>i.productId===e)}onGlobalFilter(e,i){e.filterGlobal(i.target.value,"contains")}refreshStockList(){this.service.getAllStockForUser().subscribe({next:e=>{this.stockForUserList=e.data},error:e=>{this.messageService.add({severity:"error",summary:"Error",detail:e.message,life:3e3})}})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(d.q),t.Y36(h.ez))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-stockforuser-crud"]],decls:22,vars:21,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],[2,"font-size","1.5em","font-weight","bold"],["styleClass","mb-4"],["pTemplate","left"],[1,"my-2"],["pButton","","pRipple","","label","Place Request","icon","pi pi-plus",1,"p-button-success","mr-2",3,"disabled","click"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","id",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","selection","rowHover","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Add to Cart",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["class","my-2",4,"ngIf"],[3,"value"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search by any column...",1,"w-full","sm:w-auto",3,"input"],["pSortableColumn","productName"],["field","productName"],["pSortableColumn","productId"],["field","productId"],["pSortableColumn","pricePerUnit"],["field","pricePerUnit"],["pSortableColumn","totalQty"],["field","totalQty"],[3,"ngClass"],[2,"width","14%","min-width","10rem"],[1,"p-column-title"],[2,"width","14%","min-width","8rem"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-shopping-cart",1,"p-button-rounded","p-button-success","mr-2",3,"click"],[1,"field"],["for","productName"],["type","text","pInputText","","id","name","disabled","",3,"ngModel","ngModelChange"],["for","pricePerUnit"],["type","text","pInputText","","id","pricePerUnit","disabled","",3,"ngModel","ngModelChange"],[1,"formgrid","grid"],[1,"field","col"],["for","requestedQuantity"],["id","requestedQuantity",3,"ngModel","styleClass","ngModelChange"],["class","error-message","style","color: red;",4,"ngIf"],["for","totalPrice"],["type","text","pInputText","","id","totalPrice","disabled","",3,"value"],[1,"error-message",2,"color","red"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"disabled","click"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"p-toast"),t.TgZ(4,"p"),t._uU(5,"Total:"),t.qZA(),t.TgZ(6,"div",3),t._uU(7),t.ALo(8,"currency"),t.qZA(),t._UZ(9,"br"),t.TgZ(10,"p-toolbar",4),t.YNc(11,z,1,1,"ng-template",5),t.TgZ(12,"div",6)(13,"button",7),t.NdJ("click",function(){return n.saveData()}),t.qZA()()(),t.TgZ(14,"p-table",8,9),t.NdJ("selectionChange",function(g){return n.selectedStocks=g}),t.YNc(16,W,6,0,"ng-template",10)(17,X,13,0,"ng-template",11)(18,et,21,10,"ng-template",12),t.qZA()(),t.TgZ(19,"p-dialog",13),t.NdJ("visibleChange",function(g){return n.stockDialog=g}),t.YNc(20,nt,21,9,"ng-template",14)(21,it,2,1,"ng-template",15),t.qZA()()()),2&i&&(t.xp6(7),t.hij(" ",t.xi3(8,15,n.getTotalPrice(),"PKR ")," "),t.xp6(6),t.Q6J("disabled",!n.requestList||0===n.requestList.length||n.getTotalPrice()>2e6),t.xp6(1),t.Q6J("value",n.stockForUserList)("columns",n.cols)("rows",10)("globalFilterFields",t.DdM(18,rt))("paginator",!0)("rowsPerPageOptions",t.DdM(19,st))("showCurrentPageReport",!0)("selection",n.selectedStocks)("rowHover",!0),t.xp6(5),t.Akn(t.DdM(20,at)),t.Q6J("visible",n.stockDialog)("modal",!0))},dependencies:[c.mk,c.O5,Z.V,h.jx,y.Rn,b.o,u.o,x.FN,_.H,f.Hq,m.Fj,m.JJ,m.On,C.iA,C.lQ,C.fz,c.H9],styles:[".selected-product[_ngcontent-%COMP%]{background-color:#f3b7b2}"]})}return o})(),ct=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[r.Bz.forChild([{path:"create",component:I,data:{title:"Create Stock"}},{path:"create/:id",component:I,data:{title:"Edit Stock"}},{path:"inventory",component:lt,data:{title:"View Stock"}}]),r.Bz]})}return o})();var pt=s(1865);let ut=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=t.oAB({type:o});static \u0275inj=t.cJS({imports:[c.ez]})}return o})();var dt=s(6022),gt=s(3743);let _t=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[c.ez,ct,Z.S,y.L$,pt.cc,A.kW,ut,b.j,dt.Xt,u.V,x.EV,_.T,f.hJ,m.u5,gt.O,C.U$,k._8]})}return o})()},7209:(S,v,s)=>{s.d(v,{q:()=>t});var c=s(553),r=s(5849),h=s(1474);let t=(()=>{class d{constructor(l){this.http=l}getAllStocks(){return this.http.get(`${c.N.apiUrl}/api/StockAPI/GetAllStocks`)}getAllStockWithNames(){return this.http.get(`${c.N.apiUrl}/api/StockAPI/GetAllStockWithNames`)}getStockById(l){return this.http.get(`${c.N.apiUrl}/api/StockAPI/GetProductById/${l}`)}getAllStockForUser(){return this.http.get(`${c.N.apiUrl}/api/StockAPI/GetAllStockForUser`)}AddRequestList(l){return this.http.post(`${c.N.apiUrl}/api/RequestAPI/CreateOrUpdateRequest`,l)}StockAdd(l){return this.http.post(`${c.N.apiUrl}/api/StockAPI/CreateOrUpdateStock`,l)}StockDelete(l){return this.http.delete(`${c.N.apiUrl}/api/StockAPI/DeleteStock/${l}`)}static#t=this.\u0275fac=function(T){return new(T||d)(r.LFG(h.eN))};static#e=this.\u0275prov=r.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()},9720:(S,v,s)=>{s.d(v,{m:()=>t});var c=s(553),r=s(5849),h=s(1474);let t=(()=>{class d{constructor(l){this.http=l}getAllVendors(){return this.http.get(`${c.N.apiUrl}/api/VendorAPI/GetAllVendors`)}getVendorById(l){return this.http.get(`${c.N.apiUrl}/api/VendorAPI/GetVendorById/${l}`)}VendorAdd(l){return this.http.post(`${c.N.apiUrl}/api/VendorAPI/CreateorUpdateVendor`,l)}VendorDelete(l){return this.http.delete(`${c.N.apiUrl}/api/VendorAPI/DeleteVendor/`+l)}static#t=this.\u0275fac=function(T){return new(T||d)(r.LFG(h.eN))};static#e=this.\u0275prov=r.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()},6340:(S,v,s)=>{s.d(v,{V:()=>b,o:()=>A});var c=s(6814),r=s(5849),h=s(5219);function t(u,x){1&u&&r.GkF(0)}function d(u,x){if(1&u&&(r.TgZ(0,"div",4),r.YNc(1,t,1,0,"ng-container",5),r.qZA()),2&u){const _=r.oxw();r.uIk("data-pc-section","start"),r.xp6(1),r.Q6J("ngTemplateOutlet",_.startTemplate)}}function M(u,x){1&u&&r.GkF(0)}function l(u,x){if(1&u&&(r.TgZ(0,"div",6),r.YNc(1,M,1,0,"ng-container",5),r.qZA()),2&u){const _=r.oxw();r.uIk("data-pc-section","center"),r.xp6(1),r.Q6J("ngTemplateOutlet",_.centerTemplate)}}function T(u,x){1&u&&r.GkF(0)}function Z(u,x){if(1&u&&(r.TgZ(0,"div",7),r.YNc(1,T,1,0,"ng-container",5),r.qZA()),2&u){const _=r.oxw();r.uIk("data-pc-section","end"),r.xp6(1),r.Q6J("ngTemplateOutlet",_.endTemplate)}}const y=["*"];let A=(()=>{class u{el;style;styleClass;ariaLabelledBy;templates;startTemplate;endTemplate;centerTemplate;constructor(_){this.el=_}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(_=>{switch(_.getType()){case"start":case"left":this.startTemplate=_.template;break;case"end":case"right":this.endTemplate=_.template;break;case"center":this.centerTemplate=_.template}})}static \u0275fac=function(f){return new(f||u)(r.Y36(r.SBq))};static \u0275cmp=r.Xpm({type:u,selectors:[["p-toolbar"]],contentQueries:function(f,m,C){if(1&f&&r.Suo(C,h.jx,4),2&f){let k;r.iGM(k=r.CRH())&&(m.templates=k)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy"},ngContentSelectors:y,decls:5,vars:9,consts:[["role","toolbar",3,"ngClass","ngStyle"],["class","p-toolbar-group-left p-toolbar-group-start",4,"ngIf"],["class","p-toolbar-group-center",4,"ngIf"],["class","p-toolbar-group-right p-toolbar-group-end",4,"ngIf"],[1,"p-toolbar-group-left","p-toolbar-group-start"],[4,"ngTemplateOutlet"],[1,"p-toolbar-group-center"],[1,"p-toolbar-group-right","p-toolbar-group-end"]],template:function(f,m){1&f&&(r.F$t(),r.TgZ(0,"div",0),r.Hsn(1),r.YNc(2,d,2,2,"div",1)(3,l,2,2,"div",2)(4,Z,2,2,"div",3),r.qZA()),2&f&&(r.Tol(m.styleClass),r.Q6J("ngClass","p-toolbar p-component")("ngStyle",m.style),r.uIk("aria-labelledby",m.ariaLabelledBy)("data-pc-name","toolbar"),r.xp6(2),r.Q6J("ngIf",m.startTemplate),r.xp6(1),r.Q6J("ngIf",m.centerTemplate),r.xp6(1),r.Q6J("ngIf",m.endTemplate))},dependencies:[c.mk,c.O5,c.tP,c.PC],styles:["@layer primeng{.p-toolbar{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.p-toolbar-group-start,.p-toolbar-group-center,.p-toolbar-group-end,.p-toolbar-group-left,.p-toolbar-group-right{display:flex;align-items:center}}\n"],encapsulation:2,changeDetection:0})}return u})(),b=(()=>{class u{static \u0275fac=function(f){return new(f||u)};static \u0275mod=r.oAB({type:u});static \u0275inj=r.cJS({imports:[c.ez]})}return u})()}}]);